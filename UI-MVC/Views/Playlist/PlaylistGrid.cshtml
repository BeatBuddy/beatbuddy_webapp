@using BB.BL.Domain.Playlists
@model BB.BL.Domain.Playlists.Playlist

<link rel="stylesheet" type="text/css" href="../../Content/style.css" />

    <section class="ib-container" id="ib-container" >
        @foreach (PlaylistTrack track in Model.PlaylistTracks.OrderByDescending(p => p.Votes.Sum(v => v.Score)))
        {
            <article style="background-image: url(@track.Track.CoverArtUrl); background-size: cover; background-position: center center; overflow: hidden;">
                <div class="darkoverlaygrid">
                    <p>@track.Track.Artist - @track.Track.Title</p>
                    <p>@TimeSpan.FromSeconds(track.Track.Duration).ToString().Replace("00:", "")</p>
                </div>
                
            </article>
        }
    </section>




@section Scripts{
    <script src="../../Scripts/modernizr.js"></script>
    <script>
        $(function () {

            var $container = $('#ib-container'),
                $articles = $container.children('article'),
                timeout;

            $articles.on('mouseenter', function (event) {

                var $article = $(this);
                clearTimeout(timeout);
                timeout = setTimeout(function () {

                    if ($article.hasClass('active')) return false;

                    $articles.not($article.removeClass('blur').addClass('active'))
                             .removeClass('active')
                             .addClass('blur');

                }, 65);

            });

            $container.on('mouseleave', function (event) {

                clearTimeout(timeout);
                $articles.removeClass('active blur');

            });

        });
    </script>
}
